<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1038.36">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Monaco}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Monaco; min-height: 25.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Monaco; color: #cd1713}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Geneva; min-height: 25.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Geneva}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Geneva; color: #cd1713}
    span.s1 {color: #102ac2}
    span.s2 {color: #000000}
    span.s3 {color: #cd1713}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1">Mul and Add (and arguments to UGens)</p>
<p class="p2"><br></p>
<p class="p1">Two arguments recur in many UGens, and its worth describing them separately in this tutorial file. They're useful because they provide a way of keeping signals scaled appropriately to be used as inputs to other UGens. The audio output of the system expects numbers in the range -1 to 1, but a frequency might require numbers from 20 to 20000, and these different sorts of scale are dealt with through the mul and add arguments.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p3">//we'll keep using the internal server for the scope facility</p>
<p class="p1">(</p>
<p class="p1"><span class="s1">Server</span>.default=s=<span class="s1">Server</span>.internal;</p>
<p class="p2"><br></p>
<p class="p1">s.boot;</p>
<p class="p1">)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">If you check help files for UGens you'll often see mul and add as the final arguments: check the SinOsc help file now:</p>
<p class="p2"><br></p>
<p class="p3"><span class="s2">[</span><span class="s1">SinOsc</span><span class="s2">] </span>//cmd+d to bring up after double clicking anywhere on SinOsc, or on the brackets</p>
<p class="p2"><br></p>
<p class="p1">Notice that mul is the third and add is the fourth. You can directly address those inputs to the oscillator (those 'arguments') by using the colon syntax:</p>
<p class="p2"><br></p>
<p class="p1">{<span class="s1">SinOsc</span>.ar(mul:0.1)}.scope</p>
<p class="p4"><br></p>
<p class="p5">For audio outputs (which this ar rate SinOsc is, for it is the last thing going out to the soundcard) the values must be kept between -1 and 1 (with mul:0.1, the previous sound was kept between -0.1 and 0.1, safely within bounds).<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5">Here is an overloaded sound (be careful listening to this):</p>
<p class="p4"><br></p>
<p class="p6"><span class="s2">{</span><span class="s1">SinOsc</span><span class="s2">.ar(mul:2.0)}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//loud! defaults are 440 Hz, amplitude multiplier 2.0</p>
<p class="p4"><br></p>
<p class="p5">and here is a sound whose amplitude is at a more reasonable volume:</p>
<p class="p4"><br></p>
<p class="p6"><span class="s2">{</span><span class="s1">SinOsc</span><span class="s2">.ar(mul:0.1)}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//loud! defaults are 440 Hz, amplitude multiplier 2.0</p>
<p class="p4"><br></p>
<p class="p5">You can see that the mul: part of the code is setting up an amplitude multiplier, that is, it scales the signal on the y axis.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(mul:<span class="s1">MouseY</span>.kr(1.0,0.1))}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">//demo of amplitude scaling</span></p>
<p class="p4"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5">There is another standard thing you will see happening to signals, and that is offsetting (translating) on the y axis. I use the add input of the UGen for this.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(mul:0.1, add:<span class="s1">MouseY</span>.kr(0.9,-0.9))}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">//demo of offsetting</span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5">The mul and add controls help when you need to set one signal as an input to another and need to scale the input signal appropriately to the expected input values required.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(mul:<span class="s1">MouseX</span>.kr(0.1,1.0), add:<span class="s1">MouseY</span>.kr(0.9,-0.9))}.scope<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p5">(</p>
<p class="p5">{</p>
<p class="p6"><span class="s2"><span class="Apple-tab-span">	</span></span>//cutoff values need to be sensible frequencies in Hz; here sine output turned from -1 to 1 into 2000+-1700<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="s1">var</span> cutoff = <span class="Apple-tab-span">	</span><span class="s1">SinOsc</span>.ar(1,mul:<span class="s1">MouseX</span>.kr(0.0,1700.0), add:2000.0);<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s2"><span class="Apple-tab-span">	</span></span>//var cutoff = SinOsc.ar(1)*1700.0 + 2000.0;<span class="Apple-converted-space">  </span>//same thing</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="s1">LPF</span>.ar(<span class="s1">WhiteNoise</span>.ar,freq:cutoff);</p>
<p class="p5">}.scope</p>
<p class="p5">)</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p1">There is a shortcut for the mul and add inputs given by using the * and + symbols.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1">{0.1*<span class="s1">SinOsc</span>.ar}.scope</p>
<p class="p2"><br></p>
<p class="p1">is the same as<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1">{<span class="s1">SinOsc</span>.ar(mul:0.1)}.scope</p>
<p class="p2"><br></p>
<p class="p1">And</p>
<p class="p2"><br></p>
<p class="p1">{0.1*<span class="s1">SinOsc</span>.ar+0.5}.scope</p>
<p class="p2"><br></p>
<p class="p1">is the same as</p>
<p class="p2"><br></p>
<p class="p1">{<span class="s1">SinOsc</span>.ar(mul:0.1,add:0.5)}.scope</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p6">//filter example rewritten:</p>
<p class="p5">(</p>
<p class="p5">{</p>
<p class="p6"><span class="s2"><span class="Apple-tab-span">	</span></span>//cutoff values need to be sensible frequencies in Hz; here sine output turned from -1 to 1 into 2000+-1700<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s2"><span class="Apple-tab-span">	</span></span>//var cutoff = <span class="Apple-tab-span">	</span>SinOsc.ar(1,mul:MouseX.kr(0.0,1700.0), add:2000.0);<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="s1">var</span> cutoff = <span class="s1">SinOsc</span>.ar(1)*1700.0 + 2000.0;<span class="Apple-converted-space">  </span><span class="s3">//same thing</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="s1">LPF</span>.ar(<span class="s1">WhiteNoise</span>.ar,freq:cutoff);</p>
<p class="p5">}.scope</p>
<p class="p5">)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><br></p>
<p class="p5">I have used the : syntax to put values into particular inputs of the SinOsc UGen. How do I know about these inputs, and are there other ways to utilise them?<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5">The arguments to a SinOsc are freq, phase, mul, add.</p>
<p class="p5">How do I know that? Select SinOsc and hit cmd+d for the help file<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p6"><span class="s1">SinOsc</span><span class="s2"> </span>//double click on SinOsc and press cmd+d for help</p>
<p class="p4"><br></p>
<p class="p6"><span class="s1">SinOsc</span><span class="s2"> </span>//or select SinOsc and do cmd+J for the source code definition of this UGen</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5">So if I make all the UGen's inputs explicit:</p>
<p class="p4"><br></p>
<p class="p5"><span class="s1">SinOsc</span>.ar(freq, phase, mul, add)</p>
<p class="p4"><br></p>
<p class="p5">Expected input values might be:</p>
<p class="p5">freq- 20 to 10000 (Hz)</p>
<p class="p5">phase- 0.0 to 1.0 through the cycle</p>
<p class="p5">mul: 0.0 to 1.0 from silence to full amplitude</p>
<p class="p5">add: 0.0 no offset</p>
<p class="p4"><br></p>
<p class="p5">(and the output of the SinOsc is between +1 and -1)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><br></p>
<p class="p5">In using the SinOsc UGen in code I must substitute appropriate values into these inputs. These values could be fixed constants, or they could be other UGens, in which case they will probably be time varying values. If I don't specify a given input, a default value will be taken, and that is what you heard happening above.</p>
<p class="p4"><br></p>
<p class="p5">Explicit use of constants in all inputs:</p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(440, 0.0, 0.1, 0.0)}.scope</p>
<p class="p4"><br></p>
<p class="p5">Plugging a UGen, a MouseX control, into the frequency input:</p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(<span class="s1">MouseX</span>.kr(440,880), 0.0, 0.1, 0.0)}.scope</p>
<p class="p4"><br></p>
<p class="p5">Having the frequency argument as before (it is the first input, remember), using the colon to refer to a particular input, and accepting defaults for the rest:</p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(<span class="s1">MouseX</span>.kr(440,880), mul:0.1)}.scope</p>
<p class="p4"><br></p>
<p class="p4"><span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5">There are often many ways of accomplishing something. For instance, to limit the volume of a single SinOsc, we might write:</p>
<p class="p4"><br></p>
<p class="p6"><span class="s2">{</span><span class="s1">SinOsc</span><span class="s2">.ar(440,0.0,0.1)}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//provide freq and mul arguments directly</p>
<p class="p4"><br></p>
<p class="p6"><span class="s2">{</span><span class="s1">SinOsc</span><span class="s2">.ar(mul:0.1)}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//provide just the multiplier argument explicitly</p>
<p class="p4"><br></p>
<p class="p6"><span class="s2">{0.1*</span><span class="s1">SinOsc</span><span class="s2">.ar}.scope<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//multiply the SinOsc UGen by a constant</p>
<p class="p4"><br></p>
<p class="p6"><span class="s2">{</span><span class="s1">SinOsc</span><span class="s2">.ar(440, mul: -20.dbamp)}.scope <span class="Apple-converted-space">  </span></span>//use dBs! The conversion calculation is done just once at the<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space">   <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>     </span></span>//initialisation of the UGen</p>
<p class="p4"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1">A note on modulation (you may find it useful to reread this later):</p>
<p class="p2"><br></p>
<p class="p5">mul and add are very useful in setting up modulators, sometimes via the * and + versions. The mul input in particular gets used for explicit modulation, that is, multiplying different signals together.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">Using one SinOsc to modulate the frequency of another:</p>
<p class="p4"><br></p>
<p class="p5">{<span class="s1">SinOsc</span>.ar(<span class="s1">SinOsc</span>.ar(3,mul:40,add:440),0,0.1)}.scope</p>
<p class="p4"><br></p>
<p class="p5">The inner SinOsc is the modulator. 3 times per second, it varies between +-40 (mul scaling). I add 440 to make this output value go between 400 and 480. This is a suitable input varying frequency control for the outer SinOsc.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
</body>
</html>
